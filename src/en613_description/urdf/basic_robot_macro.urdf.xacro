<?xml version="1.0"?>

<robot xmlns:xacro="http://wiki.ros.org/xacro">
    <xacro:macro name="basic_robot" params="">
        <material name="electric-blue">
            <color rgba="0.0 0.5 1.0 1.0"/>
        </material>

        <material name="crimson-red">
            <color rgba="0.8 0.0 0.2 1.0"/>
        </material>

        <material name="lime-green">
            <color rgba="0.2 1.0 0.2 1.0"/>
        </material>

        <material name="gunmetal-gray">
            <color rgba="0.2 0.2 0.25 1.0"/>
        </material>

        <!-- Body Link -->
        <link name="chassis">
            <visual>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <box size="0.825 0.825 0.075"/>
                </geometry>
                <material name="gunmetal-gray"/>
            </visual>

            <inertial>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <mass value="15.0"/>
                <inertia ixx="0.8578125" ixy="0.0" ixz="0.0" iyy="0.8578125" iyz="0.0" izz="1.7015625" />
            </inertial>
            
            <collision>
                <geometry>
                    <box size="0.825 0.825 0.075"/>
                </geometry>

                <surface>
                    <friction>
                        <ode>
                            <mu>0.5</mu>
                            <mu2>0.5</mu2>
                        </ode>
                    </friction>
                    <contact>
                        <ode>
                            <kp>1e6</kp>
                            <kd>100</kd>
                        </ode>
                    </contact>
                </surface>
            </collision>
        </link>

        <link name="left_wheel">
            <visual>
                <origin rpy="1.570795 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <cylinder length="0.05" radius="0.4"/>
                </geometry>
                <material name="electric-blue"/>
            </visual>

            <inertial>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <mass value="2.0"/>
                <inertia ixx="0.0804167" ixy="0.0" ixz="0.0" iyy="0.0804167" iyz="0.0" izz="0.16" />
            </inertial>

            <collision>
                <origin xyz="0.0 0.0 0.0" rpy="1.570795 0.0 0.0"/>
                <geometry>
                    <cylinder length="0.05" radius="0.4"/>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1</mu>
                            <mu2>1</mu2>
                            <slip1>0.035</slip1>
                            <slip2>0</slip2>
                            <fdir1>0 0 1</fdir1>
                        </ode>
                    </friction>
                </surface>
            </collision>
        </link>

        <link name="right_wheel">
            <visual>
                <origin rpy="1.570795 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <cylinder length="0.05" radius="0.4"/>
                </geometry>
                <material name="crimson-red"/>
            </visual>

            <inertial>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <mass value="2.0"/>
                <inertia ixx="0.0804167" ixy="0.0" ixz="0.0" iyy="0.0804167" iyz="0.0" izz="0.16" />
            </inertial>

            <collision>
                <origin xyz="0.0 0.0 0.0" rpy="1.570795 0.0 0.0"/>
                <geometry>
                    <cylinder length="0.05" radius="0.4"/>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1</mu>
                            <mu2>1</mu2>
                            <slip1>0.035</slip1>
                            <slip2>0</slip2>
                            <fdir1>0 0 1</fdir1>
                        </ode>
                    </friction>
                </surface>
            </collision>
        </link>

        <link name="lidar_dome">
            <visual>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <sphere radius="0.03125"/>
                </geometry>
                <material name="lime-green"/>
            </visual>

            <inertial>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <mass value="0.1"/>
                <inertia ixx="3.90625e-05" ixy="0.0" ixz="0.0" iyy="3.90625e-05" iyz="0.0" izz="3.90625e-05" />
            </inertial>

            <collision>
                <geometry>
                    <sphere radius="0.03125"/>
                </geometry>
            </collision>
        </link>

        <joint name="left_wheel_joint" type="continuous">
            <origin rpy="0 0 0" xyz="0 0.4375 0"/>
            <parent link="chassis"/>
            <child link="left_wheel"/>
            <axis xyz="0 1 0"/>
            <limit effort="100" velocity="10.0"/>
            <dynamics damping="0.1" friction="0.1"/>
        </joint>

        <joint name="right_wheel_joint" type="continuous">
            <origin rpy="0 0 0" xyz="0 -0.4375 0"/>
            <parent link="chassis"/>
            <child link="right_wheel"/>
            <axis xyz="0 1 0"/>
            <limit effort="100" velocity="10.0"/>
            <dynamics damping="0.1" friction="0.1"/>
        </joint>

        <joint name="lidar_joint" type="fixed">
            <origin rpy="0 0 0" xyz="0.3 0 0.025"/>
            <parent link="chassis"/>
            <child link="lidar_dome"/>
        </joint>
    </xacro:macro>
</robot>
